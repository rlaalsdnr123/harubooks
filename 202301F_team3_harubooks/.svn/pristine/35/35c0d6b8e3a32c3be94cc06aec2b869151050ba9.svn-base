<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
        <%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
            <%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
                <!DOCTYPE html>
                <html lang="en">
                <link rel="stylesheet" href="/resources/assets/css/bookDetail.css">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
                    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
                    crossorigin="anonymous" referrerpolicy="no-referrer" />
                <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">

                <body class="">


                    <!--헤더 삽입-->



                    <!-- ====== MAIN CONTENT ====== -->
                    <div class="page-header border-bottom">
                        <div class="container">
                            <div class="d-md-flex justify-content-between align-items-center py-4">
                                <h1 class="page-title font-size-3 font-weight-bold m-0 text-lh-lg font-size-9">
                                    ${book.book_title }</h1>
                                <nav class="woocommerce-breadcrumb font-size-2">
                                    <a href="/harubooks/category?ccg_b002=${book.ccg_b002 }&ccg_b003=${book.ccg_b003 }"
                                        class="h-primary">${book.ccg_b002 }</a>
                                    <span class="breadcrumb-separator mx-1"><i class="fas fa-angle-right"></i></span>
                                    <a href="/harubooks/category?ccg_b002=${book.ccg_b002 }&ccg_b003=${book.ccg_b003 }"
                                        class="h-primary">${book.ccg_b003 }</a>

                                </nav>
                            </div>
                        </div>
                    </div>
                    <div id="primary" class="content-area">
                        <main id="main" class="site-main ">
                            <div class="product">
                                <div class="container">
                                    <div id="intro-product">
                                        <div id="intro-1">
                                            <div id="intro-1-1">
                                                <div id="intro-1-1-1">
                                                    <p style="font-weight: bold;">지은이 : ${book.book_author }</p>
                                                    <p style="color:#767676; font-size: small;">${book.pub_nm } ·
                                                        ${book.book_spmt_ymd }</p>
                                                </div>
                                                <div id="intro-1-1-2">
                                                    <div style="flex: 50%; width: 50%; display: flex;">
                                                        <div
                                                            style="width: 90%;margin: 0 auto;display: flex;align-items: center;flex-direction: column;">
                                                            <p
                                                                style="text-align: center;margin-top: 8px;margin-bottom: 5px;color: #3cb454;font-weight: bold;">
                                                                10점</p>
                                                            <div>
                                                                <i class="fa-solid fa-star" style="color: #3ec92c;"></i>
                                                                <i class="fa-solid fa-star" style="color: #3ec92c;"></i>
                                                                <i class="fa-solid fa-star" style="color: #3ec92c;"></i>
                                                                <i class="fa-solid fa-star" style="color: #3ec92c;"></i>
                                                                <i class="fa-solid fa-star" style="color: #3ec92c;"></i>
                                                            </div>
                                                            <span
                                                                style="font-size: small; color:#767676;margin-top: 10px">(20개의
                                                                리뷰)</span>

                                                        </div>
                                                    </div>
                                                    <div
                                                        style="flex: 50%; width: 50%;display: flex;align-items: center;justify-content: center;">
                                                        <div
                                                            style="width: 80%;margin: 0 auto;display: flex;align-items: center;">
                                                            <button
                                                                style="width: 80%;height:50px;border-radius:15px;background:#d5d5d5;font-weight:bold;font-size: 14px;color:white; border:none;  margin:0 auto;">리뷰
                                                                작성</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div id="intro-2">
                                            <div id="intro-2-1" style="width: 100%;">
                                                <h5
                                                    style="font-weight: bold;text-align: center;color: #595959;margin-top: 30px;">
                                                    ${book.book_title }</h5>
                                            </div>
                                            <div id="intro-2-1"
                                                style="width: 100%; display: flex;align-items: center;margin-top: 20px;">
                                                <img src="${book.book_cover }" alt="Image Description"
                                                    class="mx-auto img-fluid"
                                                    style="width: 200px; height: 352px;image-rendering: -webkit-optimize-contrast;transform: translateZ(0);backface-visibility: hidden;">
                                            </div>
                                            <div
                                                style=" width: 90%;border: 1px solid #d5d5d5;margin: 0 auto;margin-top: 50px; margin-bottom: 20px;border-radius: 15px;display: flex;align-items: center;justify-content: center;">
                                                <p
                                                    style="font-size: 13px;text-align: center;color:#595959; margin-top: 15px; ">
                                                    ${book.book_content }</p>
                                            </div>
                                        </div>
                                        <div id="intro-3">
                                            <div id="intro-3-1" style="display: flex;">
                                                <div style="margin-top: 30px;display: flex; align-items: center;">
                                                    <div
                                                        style="border: 2px solid green;border-radius:15px; width: 80px;height: 30px;">
                                                        <p
                                                            style="text-align: center; font-size: small; font-weight: bold;">
                                                            # ${book.ccg_b001 }</p>
                                                    </div>
                                                    <div
                                                        style="border: 2px solid #595959;border-radius:15px; width: 110px;height: 30px;">
                                                        <p
                                                            style="text-align: center;font-size: small;font-weight: bold;">
                                                            # ${book.ccg_b002 }</p>
                                                    </div>
                                                    <div
                                                        style="border: 2px solid #6528e0;border-radius:15px; width: 100px;height: 30px;">
                                                        <p
                                                            style="text-align: center;font-size: small;font-weight: bold;">
                                                            # ${book.ccg_b003 }</p>
                                                    </div>
                                                    <div
                                                        style="border: 2px solid skyblue;border-radius:15px; width: 85px;height: 30px;">
                                                        <p
                                                            style="text-align: center;font-size: small;font-weight: bold;">
                                                            # 무료배송</p>
                                                    </div>
                                                </div>
                                            </div> 
                                                <div id="intro-3-1"
                                                    style="display: flex; flex-direction: column; width: 90%;">
                                                    <div
                                                        style="margin-top: 50px; border-bottom: 1px solid #d5d5d5; width: 100%;">
                                                        <span
                                                            style="color: #3cb454; font-size:24px;">${book.book_discount
                                                            }% </span><span
                                                            style="font-size: 30px;">${book.book_ntsl_amt }원 </span><del
                                                            style="color: rgb(221, 81, 104);font-weight: bold;">${book.book_amt
                                                            }원</del>
                                                    </div>
                                                    <div
                                                        style="margin-top: 10px; border-bottom: 1px solid #d5d5d5; width: 100%;">
                                                        <span style="font-size:18px; font-weight: bold;">적립/마일리지 </span>
                                                        <c:set var="totalAmount"
                                                            value="${book.book_ntsl_amt * book.book_mileage}" />
                                                        <p style="color:#3cb454; font-weight: bold; ">
                                                            <fmt:formatNumber value="${totalAmount}" type="number"
                                                                pattern="#.#" />
                                                        </p>
                                                        <!--구매하면 얻는 총 마일리지-->
                                                        <input type="hidden" name="book_mileage" id="mileage"
                                                            value="<fmt:formatNumber value='${totalAmount}' type='number' pattern='#.#' />">
                                                        <!--구매하면 얻는 총 마일리지-->

                                                        <!--책 번호 -->
                                                        <input type="hidden" name="book_no" value="${book.book_no}" id="bookNo">
                                                    </div>
                                                    <div
                                                        style="margin-top: 10px; border-bottom: 1px solid #d5d5d5; width: 100%; display: flex; justify-content: space-between;">
                                                        <span style="font-size:18px; font-weight: bold;">수량 : </span>
                                                        <div>
                                                            <a id="minus"><i class="fa-solid fa-circle-minus fa-xl"
                                                                    style="color: #12b51d;line-height:none;"></i></a>
                                                        </div>
                                                        <div>
                                                            <span style="font-size: 20px;" id="cnt">1</span>
                                                            <!--총 구매할 개수-->
                                                            <input type="hidden" name="pl_cnt" id="pl_cnt">
                                                        </div>
                                                        <div>
                                                            <i id="plus" class="fa-solid fa-circle-plus fa-xl"
                                                                style="color: #12b51d;line-height:none;"></i>
                                                        </div>
                                                    </div>
                                                    <div style="margin-top: 10px; width: 100%;">
                                                        <div style="text-align: center; ">
                                                            <span style="font-weight: bold;">총 상품 금액 : </span><span
                                                                style="font-size: 26px; font-weight: bold; color: #3cb454;"
                                                                id="totalPrice"> ${book.book_ntsl_amt }</span><span
                                                                style="font-size: 22px; font-weight: bold; color: #3cb454;">원</span>
                                                        </div>
                                                        <div
                                                            style="display: flex; flex-direction: column; margin-top: 30px;">
                                                            <button id="wishList" type="button"
                                                                style="height:50px; width:80%; margin:0 auto; font-size:1.2em; font-weight:bold; border-radius:15px; border:1px solid rgb(221, 81, 104); background-color:white; color:rgb(221, 81, 104);">찜하기</button>
                                                        </div>
                                                        <div
                                                            style="display: flex; flex-direction: column; margin-top: 30px;">
                                                            <button id="basketList" type="button"
                                                                style="height:50px; width:80%; margin:0 auto; font-size:1.2em; font-weight:bold; border-radius:15px; border:1px solid #767676; background-color:white; color:#767676;">장바구니
                                                                추가하기</button>
                                                        </div>
                                                        
                                                        <div style="display: flex; flex-direction: column; margin-top: 30px;">
                                                        	
                                                            <button id="buyProd" type="button"
                                                                style="height:50px; width:80%; margin:0 auto; font-size:1.2em; font-weight:bold; border-radius:15px; border:1px solid #3cb454; background-color:white; color: #3cb454;">구매하기</button>
                                                        </div>
                                                        <!--총 상품금액-->
                                                        <input type="hidden" name="pl_prchs_amt" id="pl_prchs_amt">
                                                        <input type="hidden" value="${book.book_ntsl_amt}" id="price">
                                                    </div>
                                                </div>
                                        </div>
                                    </div>


                                </div>

                                <!-- Nav Classic -->
                                <div class="js-scroll-nav mb-10">
                                    <div class="woocommerce-tabs wc-tabs-wrapper  2 mx-lg-auto">
                                        <div id="Description" class="">
                                            <div class="border-top border-bottom">
                                                <ul
                                                    class="container tabs wc-tabs nav justify-content-md-center flex-nowrap flex-md-wrap overflow-auto overflow-md-visble">
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item active">
                                                        <a class="nav-link py-4 font-weight-medium active"
                                                            href="#Description">
                                                            줄거리
                                                        </a>
                                                    </li>
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item">
                                                        <a class="nav-link py-4 font-weight-medium"
                                                            href="#ProductDetails">
                                                            책 상세보기
                                                        </a>
                                                    </li>
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item">
                                                        <a class="nav-link py-4 font-weight-medium"
                                                            href="#ProductReviews">
                                                            리뷰 (0)
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>

                                            <!-- Tab Content -->
                                            <div class="tab-content font-size-2 container">
                                                <div class="row">
                                                    <div class="col-xl-8 offset-xl-2">
                                                        <div
                                                            class="woocommerce-Tabs-panel woocommerce-Tabs-panel--description panel entry-content wc-tab pt-9">
                                                            <!-- Mockup Block -->
                                                            <p class="mb-0">${book.book_content }</p>
                                                            <br><br>
                                                            <!-- End Mockup Block -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End Tab Content -->
                                        </div>

                                        <div id="ProductDetails" class="">
                                            <div class="border-top border-bottom">
                                                <ul
                                                    class="container tabs wc-tabs nav justify-content-md-center flex-nowrap flex-md-wrap overflow-auto overflow-md-visble">
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item">
                                                        <a class="nav-link py-4 font-weight-medium" href="#Description">
                                                            줄거리
                                                        </a>
                                                    </li>
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item active">
                                                        <a class="nav-link py-4 font-weight-medium active"
                                                            href="#ProductDetails">
                                                            책 상세정보
                                                        </a>
                                                    </li>
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item">
                                                        <a class="nav-link py-4 font-weight-medium"
                                                            href="#ProductReviews">
                                                            리뷰 (0)
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>

                                            <!-- Tab Content -->
                                            <div class="tab-content font-size-2 container">
                                                <div class="row">
                                                    <div class="col-xl-8 offset-xl-2">
                                                        <div
                                                            class="woocommerce-Tabs-panel woocommerce-Tabs-panel--description panel entry-content wc-tab pt-9">
                                                            <!-- Mockup Block -->
                                                            <div class="table-responsive mb-4">
                                                                <table class="table table-hover table-borderless">
                                                                    <tbody>
                                                                        <tr>
                                                                            <th class="px-4 px-xl-5"
                                                                                style="text-align: center">포맷: </th>
                                                                            <td style="text-align: center">
                                                                                ${book.ccg_b001 }</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="px-4 px-xl-5"
                                                                                style="text-align: center">페이지 수</th>
                                                                            <td style="text-align: center">
                                                                                ${book.book_page_cnt }</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="px-4 px-xl-5"
                                                                                style="text-align: center">출간일: </th>
                                                                            <td style="text-align: center">
                                                                                ${book.book_spmt_ymd }</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="px-4 px-xl-5"
                                                                                style="text-align: center">출판사:</th>
                                                                            <td style="text-align: center">${book.pub_nm
                                                                                }</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="px-4 px-xl-5"
                                                                                style="text-align: center">가격:</th>
                                                                            <td style="text-align: center">
                                                                                ${book.book_amt }</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="px-4 px-xl-5"
                                                                                style="text-align: center">ISBN:</th>
                                                                            <td style="text-align: center">
                                                                                ${book.book_isbn }</td>
                                                                        </tr>

                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <!-- End Mockup Block -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End Tab Content -->
                                        </div>
                                        <div id="ProductReviews" class="">
                                            <div class="border-top border-bottom">
                                                <ul
                                                    class="container tabs wc-tabs nav justify-content-md-center flex-nowrap flex-md-wrap overflow-auto overflow-md-visble">
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item">
                                                        <a class="nav-link py-4 font-weight-medium" href="#Description">
                                                            줄거리
                                                        </a>
                                                    </li>
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item">
                                                        <a class="nav-link py-4 font-weight-medium"
                                                            href="#ProductDetails">
                                                            책 상세정보
                                                        </a>
                                                    </li>
                                                    <li class="flex-shrink-0 flex-md-shrink-1 nav-item active">
                                                        <a class="nav-link py-4 font-weight-medium active"
                                                            href="#ProductReviews">
                                                            리뷰 (0)
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>


                                            <!-- Tab Content -->
                                            <div class="tab-content font-size-2 container">
                                                <div class="row">
                                                    <div class="col-xl-8 offset-xl-2">
                                                        <div
                                                            class="woocommerce-Tabs-panel woocommerce-Tabs-panel--description panel entry-content wc-tab pt-9">
                                                            <!-- Mockup Block -->
                                                            <h4 class="font-size-3 font-weight-bold">리뷰 </h4>
                                                            <div class="row mb-8">
                                                                <div class="col-md-6 mb-6 mb-md-0">
                                                                    <div class="d-flex  align-items-center mb-4">
                                                                        <span
                                                                            class="font-size-15 font-weight-bold">4.6</span>
                                                                        <div class="ml-3 h6 mb-0">
                                                                            <span class="font-weight-normal">3,714
                                                                                reviews</span>
                                                                            <div class="text-yellow-darker">
                                                                                <small class="fas fa-star"></small>
                                                                                <small class="fas fa-star"></small>
                                                                                <small class="fas fa-star"></small>
                                                                                <small class="fas fa-star"></small>
                                                                                <small class="far fa-star"></small>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-md-flex">
                                                                        <button type="button"
                                                                            class="btn btn-outline-dark rounded-0 px-5 mb-3 mb-md-0">모든
                                                                            리뷰보기</button>
                                                                        <button type="button"
                                                                            class="btn btn-dark ml-md-3 rounded-0 px-5">리뷰
                                                                            작성하기</button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <!-- Ratings -->
                                                                    <ul class="list-unstyled pl-xl-4">
                                                                        <li class="py-2">
                                                                            <a class="row align-items-center mx-gutters-2 font-size-2"
                                                                                href="javascript:;">
                                                                                <div class="col-auto">
                                                                                    <span class="text-dark">5점</span>
                                                                                </div>
                                                                                <div class="col px-0">
                                                                                    <div class="progress bg-white-100"
                                                                                        style="height: 7px;">
                                                                                        <div class="progress-bar bg-yellow-darker"
                                                                                            role="progressbar"
                                                                                            style="width: 100%;"
                                                                                            aria-valuenow="100"
                                                                                            aria-valuemin="0"
                                                                                            aria-valuemax="100"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-2">
                                                                                    <span
                                                                                        class="text-secondary">205</span>
                                                                                </div>
                                                                            </a>
                                                                        </li>
                                                                        <li class="py-2">
                                                                            <a class="row align-items-center mx-gutters-2 font-size-2"
                                                                                href="javascript:;">
                                                                                <div class="col-auto">
                                                                                    <span class="text-dark">4점</span>
                                                                                </div>
                                                                                <div class="col px-0">
                                                                                    <div class="progress bg-white-100"
                                                                                        style="height: 7px;">
                                                                                        <div class="progress-bar bg-yellow-darker"
                                                                                            role="progressbar"
                                                                                            style="width: 53%;"
                                                                                            aria-valuenow="53"
                                                                                            aria-valuemin="0"
                                                                                            aria-valuemax="100"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-2">
                                                                                    <span
                                                                                        class="text-secondary">55</span>
                                                                                </div>
                                                                            </a>
                                                                        </li>
                                                                        <li class="py-2">
                                                                            <a class="row align-items-center mx-gutters-2 font-size-2"
                                                                                href="javascript:;">
                                                                                <div class="col-auto">
                                                                                    <span class="text-dark">3점</span>
                                                                                </div>
                                                                                <div class="col px-0">
                                                                                    <div class="progress bg-white-100"
                                                                                        style="height: 7px;">
                                                                                        <div class="progress-bar bg-yellow-darker"
                                                                                            role="progressbar"
                                                                                            style="width: 20%;"
                                                                                            aria-valuenow="20"
                                                                                            aria-valuemin="0"
                                                                                            aria-valuemax="100"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-2">
                                                                                    <span
                                                                                        class="text-secondary">23</span>
                                                                                </div>
                                                                            </a>
                                                                        </li>
                                                                        <li class="py-2">
                                                                            <a class="row align-items-center mx-gutters-2 font-size-2"
                                                                                href="javascript:;">
                                                                                <div class="col-auto">
                                                                                    <span class="text-dark">2점</span>
                                                                                </div>
                                                                                <div class="col px-0">
                                                                                    <div class="progress bg-white-100"
                                                                                        style="height: 7px;">
                                                                                        <div class="progress-bar bg-yellow-darker"
                                                                                            role="progressbar"
                                                                                            style="width: 0%;"
                                                                                            aria-valuenow="0"
                                                                                            aria-valuemin="0"
                                                                                            aria-valuemax="100"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-2">
                                                                                    <span
                                                                                        class="text-secondary">0</span>
                                                                                </div>
                                                                            </a>
                                                                        </li>
                                                                        <li class="py-2">
                                                                            <a class="row align-items-center mx-gutters-2 font-size-2"
                                                                                href="javascript:;">
                                                                                <div class="col-auto">
                                                                                    <span class="text-dark">1점</span>
                                                                                </div>
                                                                                <div class="col px-0">
                                                                                    <div class="progress bg-white-100"
                                                                                        style="height: 7px;">
                                                                                        <div class="progress-bar bg-yellow-darker"
                                                                                            role="progressbar"
                                                                                            style="width: 1%;"
                                                                                            aria-valuenow="1"
                                                                                            aria-valuemin="0"
                                                                                            aria-valuemax="100"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-2">
                                                                                    <span
                                                                                        class="text-secondary">4</span>
                                                                                </div>
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                    <!-- End Ratings -->
                                                                </div>
                                                            </div>

                                                            <h4 class="font-size-3 mb-8">리뷰</h4>

                                                            <ul class="list-unstyled mb-8">
                                                                <li class="mb-4 pb-5 border-bottom">
                                                                    <div class="d-flex align-items-center mb-3">
                                                                        <h6 class="mb-0">Amazing Story! You will LOVE it
                                                                        </h6>
                                                                        <div class="text-yellow-darker ml-3">
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="far fa-star"></small>
                                                                        </div>
                                                                    </div>
                                                                    <p class="mb-4 text-lh-md">Such an incredibly
                                                                        complex story! I had to buy it because there was
                                                                        a waiting list of 30+ at the local library for
                                                                        this book. Thrilled that I made the purchase</p>
                                                                    <div class="text-gray-600 mb-4">Staci, February 22,
                                                                        2020 </div>
                                                                    <ul class="nav">
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-like-1"></i>
                                                                                <span class="ml-2">90</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-dislike"></i>
                                                                                <span class="ml-2">10</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-flag"></i>
                                                                            </a>
                                                                        </li>

                                                                    </ul>
                                                                </li>
                                                                <li class="mb-4 pb-5 border-bottom">
                                                                    <div class="d-flex align-items-center mb-3">
                                                                        <h6 class="mb-0">Get the best seller at a great
                                                                            price.</h6>
                                                                        <div class="text-yellow-darker ml-3">
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="far fa-star"></small>
                                                                        </div>
                                                                    </div>
                                                                    <p class="mb-4 text-lh-md">Awesome book, great
                                                                        price, fast delivery. Thanks so much.</p>
                                                                    <div class="text-gray-600 mb-4">Staci, February 22,
                                                                        2020 </div>
                                                                    <ul class="nav">
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-like-1"></i>
                                                                                <span class="ml-2">90</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-dislike"></i>
                                                                                <span class="ml-2">10</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-flag"></i>
                                                                            </a>
                                                                        </li>

                                                                    </ul>
                                                                </li>
                                                                <li class="mb-4 pb-5 border-bottom">
                                                                    <div class="d-flex align-items-center mb-3">
                                                                        <h6 class="mb-0">I read this book short...</h6>
                                                                        <div class="text-yellow-darker ml-3">
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="fas fa-star"></small>
                                                                            <small class="far fa-star"></small>
                                                                        </div>
                                                                    </div>
                                                                    <p class="mb-4 text-lh-md">I read this book shortly
                                                                        after I got it and didn't just put it on my TBR
                                                                        shelf mainly because I saw it on Reese
                                                                        Witherspoon's bookclub September read. It was
                                                                        one of the best books I've read this year, and
                                                                        reminded me some of Kristen Hannah's The Great
                                                                        Alone. </p>
                                                                    <div class="text-gray-600 mb-4">Staci, February 22,
                                                                        2020 </div>
                                                                    <ul class="nav">
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-like-1"></i>
                                                                                <span class="ml-2">90</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-dislike"></i>
                                                                                <span class="ml-2">10</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="mr-7">
                                                                            <a href="#"
                                                                                class="text-gray-600 d-flex align-items-center">
                                                                                <i
                                                                                    class="text-dark font-size-5 flaticon-flag"></i>
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </li>
                                                            </ul>
                                                            <!--   나중에 리뷰 모달창으로 띄어스 만들때 사용    -->
                                                            <!-- <h4 class="font-size-3 mb-4">Write a Review</h4>
                                            <div class="d-flex align-items-center mb-6">
                                                <h6 class="mb-0">Select a rating(required)</h6>
                                                <div class="text-yellow-darker ml-3 font-size-4">
                                                    <small class="far fa-star"></small>
                                                    <small class="far fa-star"></small>
                                                    <small class="far fa-star"></small>
                                                    <small class="far fa-star"></small>
                                                    <small class="far fa-star"></small>
                                                </div>
                                            </div>
                                            <div class="js-form-message form-group mb-4">
                                                <label for="descriptionTextarea" class="form-label text-dark h6 mb-3">Details please! Your review helps other shoppers.</label>
                                                <textarea class="form-control rounded-0 p-4" rows="7" id="descriptionTextarea" placeholder="What did you like or dislike? What should other shoppers know before buying?" required data-msg="Please enter your message." data-error-class="u-has-error" data-success-class="u-has-success"></textarea>
                                            </div>
                                            <div class="form-group mb-5">
                                                <label for="inputCompanyName" class="form-label text-dark h6 mb-3">Add a title</label>
                                                <input type="text" class="form-control rounded-0 px-4" name="companyName" id="inputCompanyName" placeholder="3000 characters remaining" aria-label="3000 characters remaining">
                                            </div>
                                            <div class="d-flex">
                                                <button type="submit" class="btn btn-dark btn-wide rounded-0 transition-3d-hover">Submit Review</button>
                                            </div> -->
                                                            <!-- End Mockup Block -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End Tab Content -->
                                        </div>
                                    </div>
                                </div>
                                <!-- End Nav Classic -->
                                <section class="space-bottom-3">
                                    <div class="container">
                                        <header class="mb-5 d-md-flex justify-content-between align-items-center">
                                            <h2 class="font-size-7 mb-3 mb-md-0">이책을 구매한 고객들이 많이 구매한책</h2>
                                        </header>

                                        <div class="js-slick-carousel products no-gutters border-top border-left border-right"
                                            data-arrows-classes="u-slick__arrow u-slick__arrow-centered--y"
                                            data-arrow-left-classes="fas fa-chevron-left u-slick__arrow-inner u-slick__arrow-inner--left ml-lg-n10"
                                            data-arrow-right-classes="fas fa-chevron-right u-slick__arrow-inner u-slick__arrow-inner--right mr-lg-n10"
                                            data-slides-show="5" data-responsive='[{
                               "breakpoint": 1500,
                               "settings": {
                                 "slidesToShow": 4
                               }
                            },{
                               "breakpoint": 1199,
                               "settings": {
                                 "slidesToShow": 3
                               }
                            }, {
                               "breakpoint": 992,
                               "settings": {
                                 "slidesToShow": 2
                               }
                            }, {
                               "breakpoint": 554,
                               "settings": {
                                 "slidesToShow": 2
                               }
                            }]'>
                                            <div class="product">
                                                <div class="product__inner overflow-hidden p-3 p-md-4d875">
                                                    <div
                                                        class="woocommerce-LoopProduct-link woocommerce-loop-product__link d-block position-relative">
                                                        <div class="woocommerce-loop-product__thumbnail">
                                                            <a href="../shop/single-product-v3.html"
                                                                class="d-block"><img src="https://placehold.it/120x180"
                                                                    class="img-fluid d-block mx-auto attachment-shop_catalog size-shop_catalog wp-post-image img-fluid"
                                                                    alt="image-description"></a>
                                                        </div>
                                                        <div
                                                            class="woocommerce-loop-product__body product__body pt-3 bg-white">
                                                            <div class="text-uppercase font-size-1 mb-1 text-truncate">
                                                                <a href="../shop/single-product-v3.html">Paperback</a>
                                                            </div>
                                                            <h2
                                                                class="woocommerce-loop-product__title product__title h6 text-lh-md mb-1 text-height-2 crop-text-2 h-dark">
                                                                <a href="../shop/single-product-v3.html">Think Like a
                                                                    Monk: Train Your Mind for Peace and Purpose
                                                                    Everyday</a></h2>
                                                            <div class="font-size-2  mb-1 text-truncate"><a
                                                                    href="../others/authors-single.html"
                                                                    class="text-gray-700">Jay Shetty</a></div>
                                                            <div
                                                                class="price d-flex align-items-center font-weight-medium font-size-3">
                                                                <span class="woocommerce-Price-amount amount"><span
                                                                        class="woocommerce-Price-currencySymbol">$</span>29</span>
                                                            </div>
                                                        </div>
                                                        <div class="product__hover d-flex align-items-center">
                                                            <a href="../shop/single-product-v3.html"
                                                                class="text-uppercase text-dark h-dark font-weight-medium mr-auto">
                                                                <span class="product__add-to-cart">장바구니 추가</span>
                                                                <span class="product__add-to-cart-icon font-size-4"><i
                                                                        class="flaticon-icon-126515"></i></span>
                                                            </a>
                                                            <a href="../shop/single-product-v3.html"
                                                                class="mr-1 h-p-bg btn btn-outline-primary border-0">
                                                                <i class="flaticon-switch"></i>
                                                            </a>
                                                            <a href="../shop/single-product-v3.html"
                                                                class="h-p-bg btn btn-outline-primary border-0">
                                                                <i class="flaticon-heart"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </main>
                    </div>
                    <!-- 하루북스 회원만 찜목록을 추가할 수 있다. -->
                    <input type="hidden" value='<sec:authentication property="name"/>' id="secId">
                    <script>
                        let minus = document.querySelector('#minus');
                        let plus = document.querySelector('#plus');
                        let cnt = document.querySelector('#cnt'); // 수량
                        let pl_cnt = document.querySelector('#pl_cnt');   //수량의 값을 담을 히든값
                        let total = 1;
                        let totalPrice = document.querySelector('#totalPrice');
                        let price = document.querySelector('#price').value;
                        let totalMileage = document.querySelector('#totalMileage'); // 책 구매시 총 마일리지
                        let mileage = document.querySelector('#mileage'); //책 한권당 마일리지
                        
                        pl_cnt.value = total; 
                        minus.addEventListener('click', function () {
                            if (total > 1) {
                                total -= 1;
                                cnt.innerText = total;
                                pl_cnt.value = total;
                                console.log("기존 책가격 : " + price);
                                console.log("책권당 마일리지" + mileage.value);
                                console.log(pl_cnt.value)
                                totalPrice.innerText = price * total;

                            }
                        })
                        plus.addEventListener('click', function () {
                            total += 1;
                            cnt.innerText = total;
                            pl_cnt.value = total;
                            console.log("기존 책가격 : " + price);
                            console.log("책권당 마일리지" + mileage.value);
                            console.log(pl_cnt.value)
                            totalPrice.innerText = price * total;
                        })

                        // 찜, 장바구니 추가, 구매하기
                        let secId = document.querySelector('#secId').value;
                        let bookNo = document.querySelector('#bookNo').value;
                        let wishList = document.querySelector('#wishList');
                        let basketList = document.querySelector('#basketList');
                        let buyProd = document.querySelector('#buyProd');



                        wishList.addEventListener('click', function () {
                            console.log(secId);
                            if (secId == 'anonymousUser') {
                                Swal.fire({
                                    title: '찜하기는 로그인이 필요합니다',
                                    text: '로그인 하시겠습니까?',
                                    icon: 'question',
                                    iconHtml: '!',
                                    confirmButtonText: '네',
                                    cancelButtonText: '아니요',
                                    showCancelButton: true,
                                    showCloseButton: true
                                }).then(function (result) {
                                    if (result.isConfirmed) {
                                        // '네' 버튼을 클릭한 경우
                                        window.location.href = '/login/signinForm'; // 장바구니 페이지로 이동
                                    } else {
                                        return false;
                                    }
                                });
                            } else {
                                // 내가 찜한 목록 저장위치 경로 설정하기(권한도 비회원 제외 회원, 관리자, 출판사만 접근가능하게 조치)
                                const swalWithBootstrapButtons = Swal.mixin({
                                    customClass: {
                                        confirmButton: 'btn btn-success',
                                        cancelButton: 'btn btn-danger'
                                    },
                                    buttonsStyling: false
                                })
                                Swal.fire({
                                    title: '찜목록에 추가하시겠습니까?',
                                    icon: 'question',
                                    iconHtml: '?',
                                    confirmButtonText: '네',
                                    cancelButtonText: '아니요',
                                    showCancelButton: true,
                                    showCloseButton: true
                                }).then(function (result) {
                                    if (result.isConfirmed) {
                                        // '네' 버튼을 클릭한 경우
                                        // 여기서 찜목록 추가하는 로직 설계를 해야한다. ajax로 비동기 처리한다.
                                        console.log("책번호 : " + bookNo);
                                        console.log("사용자 아이디 : " + secId);
                                        let info = {
                                            "book_no": bookNo,
                                            "ae_id": secId
                                        }
                                        let xhr = new XMLHttpRequest();
                                        xhr.open("post", "/harubooks/wishList", true);
                                        xhr.setRequestHeader("Content-Type", "application/json;charset=utf-8");
                                        xhr.setRequestHeader("${_csrf.headerName}", "${_csrf.token}");

                                        xhr.onreadystatechange = function () {
                                            if (xhr.readyState == 4 && xhr.status == 200) {
                                                let result = xhr.responseText;
                                                if (result == 'OK') {
                                                    swalWithBootstrapButtons.fire(
                                                        '추가 완료!',
                                                        '찜목록에 추가되었습니다.',
                                                        'success'
                                                    )
                                                } else if (result == 'EXIST') {
                                                    swalWithBootstrapButtons.fire(
                                                        '이미 찜한 책이에요..',
                                                        '',
                                                        'error'
                                                    )
                                                } else {
                                                    return false;
                                                }
                                            }
                                        }
                                        xhr.send(JSON.stringify(info));
                                    } else {
                                        return false;
                                    }
                                });


                            }
                        })

                        // sweet alert 커스텀
						// 장바구니 추가 버튼 클릭 이벤트
                        basketList.addEventListener('click', function () {
                            console.log(total);
                            console.log(totalPrice.innerText);
                            console.log(bookNo);
                            
                            if (secId == 'anonymousUser') {
                                Swal.fire({
                                    title: '장바구니추가는 로그인이 필요합니다',
                                    text: '로그인 하시겠습니까?',
                                    icon: 'question',
                                    iconHtml: '!',
                                    confirmButtonText: '네',
                                    cancelButtonText: '아니요',
                                    showCancelButton: true,
                                    showCloseButton: true
                                }).then(function (result) {
                                    if (result.isConfirmed) {
                                        // '네' 버튼을 클릭한 경우
                                        window.location.href = '/login/signinForm'; // 장바구니 페이지로 이동
                                    } else {
                                        return false;
                                    }
                                });
                            }else{
	                            Swal.fire({
	                                title: '장바구니에 추가하시겠습니까?',
	                                icon: 'question',
	                                iconHtml: '?',
	                                confirmButtonText: '네',
	                                cancelButtonText: '아니요',
	                                showCancelButton: true,
	                                showCloseButton: true
	                            }).then(function (result) {
	                                if (result.isConfirmed) {
	                                    // '네' 버튼을 클릭한 경우
	                                    let info = {
	                                        "cart_cnt": total,    // 수량
	                                        "totalPrice": totalPrice.innerText,
	                                        "book_no": bookNo,
	                                        "ae_id" : secId
	                                    };
	                                    let xhr = new XMLHttpRequest();
	                                    xhr.open("post", "/harubooks/basketList",true);
	                                    xhr.setRequestHeader("Content-Type", "application/json;charset=utf-8");
	                                    xhr.setRequestHeader("${_csrf.headerName}", "${_csrf.token}");
	                                    xhr.onreadystatechange = function () {
	                                        if (xhr.readyState == 4 && xhr.status == 200) {
	                                        	const swalWithBootstrapButtons = Swal.mixin({
	                                                customClass: {
	                                                    confirmButton: 'btn btn-success',
	                                                    cancelButton: 'btn btn-danger'
	                                                },
	                                                buttonsStyling: false
	                                            })
	                                            let res = xhr.responseText;
	                                            if (res == 'OK') {
	                                            	
	                                                Swal.fire({
	                                                    title: '장바구니에 추가되었습니다!',
	                                                    text: '장바구니로 이동 하시겠습니까?',
	                                                    icon: 'success',
	                                                    confirmButtonText: '장바구니로 이동',
	                                                    cancelButtonText: '아니요',
	                                                    showCancelButton: true,
	                                                    showCloseButton: true
	                                                }).then(function (result) {
	                                                    if (result.isConfirmed) {
	                                                        // '네' 버튼을 클릭한 경우
	                                                        window.location.href = '/harubooks/myCart'; // 장바구니 페이지로 이동
	                                                    } else {
	                                                        return false;
	                                                    }
	                                                });
	                                            } else if (res == 'EXIST') {
	                                                swalWithBootstrapButtons.fire(
	                                                        '이미 장바구니에 존재합니다',
	                                                        '',
	                                                        'error'
	                                                )
	                                            } else {
	                                                return false;
	                                            }
	                                        }
	                                    }
	                                    xhr.send(JSON.stringify(info));
	                                } else {
	                                    return false;
	                                }
	                            });	
                            }     
                        })
						// 결제하기 버튼 클릭 이벤트
						buyProd.addEventListener('click',function(){
                            location.href = "/harubooks/prodOrderForm?book_no="+bookNo+"&pl_cnt="+pl_cnt.value;
                        })
                    </script>
                    <!-- ====== END MAIN CONTENT ====== -->